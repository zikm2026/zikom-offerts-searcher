// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model WatchedLaptop {
  id             String   @id @default(uuid())
  model          String
  maxPriceWorst  String?
  maxPriceBest   String?
  ramFrom        String?
  ramTo          String?
  storageFrom    String?
  storageTo      String?
  gradeFrom      String?
  gradeTo        String?
  graphicsCard   String?
  createdAt      DateTime @default(now())
  updatedAt      DateTime @updatedAt

  @@map("watched_laptops")
}

model WatchedMonitor {
  id            String   @id @default(uuid())
  sizeInchesMin Float?   // np. 24
  sizeInchesMax Float?   // np. 27
  resolutionMin String?  // np. "1920x1080"
  resolutionMax String?  // np. "2560x1440"
  maxPrice      String?
  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt

  @@map("watched_monitors")
}

model WatchedDesktop {
  id           String   @id @default(uuid())
  caseType     String   // Tower | SFF | Mini
  maxPrice     String?
  ramFrom      String?
  ramTo        String?
  storageFrom  String?
  storageTo    String?
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt

  @@map("watched_desktops")
}

model AppSetting {
  id    String @id @default(uuid())
  key   String @unique
  value String
  @@map("app_settings")
}

model EmailStat {
  id          String   @id @default(uuid())
  processedAt DateTime @default(now())
  status      String   // 'processed', 'accepted', 'rejected'
  reason      String?
  subject     String?
  from        String?
  productType String?  // 'laptop' | 'monitor' | 'desktop' â€“ typ oferty

  @@map("email_stats")
  @@index([processedAt])
  @@index([status])
  @@index([productType])
}
